- name: Ensure bitwarden group
  group:
    name: "{{ bitwarden_group }}"
    state: present

- name: Ensure bitwarden user
  user:
    name: "{{ bitwarden_user }}"
    group: "{{ bitwarden_group }}"
    groups:
      - docker
    system: true
    home: "{{ bitwarden_user_home }}"
  register: user

#- name: Download bitwarden.sh for {{ bitwarden_version }}
#  get_url:
#    url: https://raw.githubusercontent.com/bitwarden/server/{{ bitwarden_version }}/scripts/bitwarden.sh
#    dest: "{{ bitwarden_user_home }}/bitwarden.sh"
#    mode: "0700"
#    owner: "{{ bitwarden_user }}"
#    group: "{{ bitwarden_group }}"
#  notify: update bitwarden # Notify update when Bitwarden install has changed
